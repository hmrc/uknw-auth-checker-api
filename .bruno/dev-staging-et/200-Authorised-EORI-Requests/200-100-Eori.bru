meta {
  name: 200-100-Eori
  type: http
  seq: 2
}

post {
  url: {{apiEndpoint}}
  body: json
  auth: none
}

headers {
  Accept: application/vnd.hmrc.1.0+json
  Authorization: Bearer {{bearerToken}}
}

body:json {
  {
    "eoris": [
      "GB837826880909874",
      "XI968840631629",
      "XI436105828614",
      "XI670738444417",
      "XI299090776708",
      "XI991478748583180",
      "GB664747832914",
      "GB845942880618380",
      "GB698422523946525",
      "XI424550299466",
      "GB944107196831",
      "XI876202322763652",
      "XI954761792185551",
      "XI705873897754",
      "XI030464530763",
      "GB138229072434544",
      "XI561521218783",
      "XI699827953498",
      "GB431532672087862",
      "XI640240976078",
      "XI408336968703",
      "XI742317271854664",
      "XI841304534177",
      "GB309300799199",
      "GB140092105275",
      "XI357938833012732",
      "GB577424947156",
      "XI841143849679",
      "GB624649849435",
      "GB821821795945",
      "GB475921266211",
      "GB660300023882813",
      "XI003832169847",
      "XI898696064248948",
      "GB492173103999",
      "XI573892547589",
      "XI230831573600",
      "XI682344031863",
      "XI088229765020030",
      "GB782131496702929",
      "GB124970092366",
      "GB335483467127",
      "GB036993338795",
      "XI449942151287",
      "GB365306171681",
      "XI734509611077138",
      "GB119670224151482",
      "GB376866666400867",
      "GB570715621581292",
      "XI730703614441144",
      "XI650198741653388",
      "XI356696292037275",
      "XI708904026536994",
      "XI435424552777668",
      "XI893149358658",
      "GB810622300678",
      "XI557610732511565",
      "GB879548754208844",
      "GB780667310068430",
      "GB119963948581344",
      "GB649668154393",
      "GB852119447564",
      "GB092471628037464",
      "XI055798951184",
      "XI595802316137908",
      "XI681293477192",
      "GB896941670136026",
      "XI963981555380037",
      "GB763762672745456",
      "XI129625272204",
      "GB489368005793681",
      "XI812762182757",
      "GB711064714192363",
      "GB971742220663",
      "GB539893161127",
      "XI727565701749956",
      "XI636147707092592",
      "XI383248179771",
      "XI135002416807",
      "GB948565160964611",
      "GB820524750043069",
      "XI575849603197726",
      "GB770586054777",
      "XI492505045911133",
      "GB075406471265",
      "GB391225207780939",
      "XI548723096609",
      "XI937139805916652",
      "XI900928638421920",
      "GB749710340815",
      "XI837681218325",
      "GB477675817676546",
      "XI362449949012803",
      "XI933033098459466",
      "XI960868133158",
      "XI687406506384",
      "GB222094101854766",
      "GB379793480517",
      "GB432244008576",
      "XI155546345776323"
    ]
  }
}

tests {
  test("should have 100 EORI results", function() {
    const data = res.getBody();
    expect(res.getStatus()).to.equal(200);
    expect(data.eoris).to.be.an('array').that.has.lengthOf(100);
  });
  
  test("confirm Date Format", function() {
    const data = res.getBody();
    var timestampFormat= /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{2}Z$/.test(data.date);
    expect(timestampFormat).to.equal(true);
    
    var startOfToday = new Date();
    startOfToday.setUTCHours(0,0,0,0);
    var currentDate =  startOfToday.toJSON().slice(0, 16);
    expect(data.date).to.startWith(currentDate);
    
  });
}
